# Программируемые Логические Контроллеры
::Перепечатать   у кого-нито::

**Распределенные встроенные системы** -  пространственно рассредоточенная система. Такие системы характеризуются наличием слабой связи между компонентами. Тенденция усложнения  систем проявляется в том,  что большенство систем реализуются в виде многопроцессорных распределенных вычислительных систем или контроллерных сетей.

### Основные свойства распределенных систем

- Множество взаимодействующих узлов
- Работа в составе систем управления без участия человека. В таких системах оператор может присутствовать ,  может получать информацию и  частично иметь  возможность воздействовать на работу системы. Однако основной обьем  управления  выполняет распределенная ВВС (встроенная вычислительная система). 

Распределенная система управления содержит несколькок уровней:

- Модель АСУП (автоматизированная система управления предприятий) - предполагает, что САУ различного уровня интегрированы в единую систему, охватывающую весь процесс жизнедеятельности предприятия.

Обьединение всех уровней в единую систему позволяет:

- Оптимизировать используемую информацию за счет централизации и  упорядочивания  потока данных.
- Интегрировать бизнес процессы, процессы управления  материалами, разработками и  производством в единую систему.
- Получить доступ ко всем  данным, существующим на предприятии, для анализа с  целью оптимизации управленческих процессов

Модель имеет форму пирамиды:

1.  Уровень предприятия  (верхний  уровень), отвечает за следующие вещи:
	1. Управление  ресурсами (ERP)
	2. Управление производством изделий
	3. Управление  продукцией
	4. Планирование и   прогнозирование 
	5. Разработка новых изделий
2. Уровень объекта (второй) и подсистемы (3) - эти два уровня отвечают за управление технологическими  процессами на небольших  предприятиях эти два уровня сливаются в один уровень управления.  На этих уровнях систему  управления строят на базе сети ethernet (в большинстве случаев). В узлах сети находятся SCADA системы. Компьютерное оборудование  этих двух уровней как правило находятся в защищенных помещениях (диспетчерских). Уровень функциональных узлов (4) - предназначен для управления агрегатами, т.е. сложными составными механизмами, главным элементом этого элемента являются логические контроллеры - вычислительные модули, задающие логику функционирования и координирующие работу этих агрегатов (в конечном счета  объектов управления). В качестве логических контроллеров выступают ПЛК. Промышленные компьютеры и сетевые модули ввода вывода. Алгоритм работы задается программным обеспечением. 

Уровень оборудования функциональных узлов (5) - самый нижний уровень, предназначен для сбора  информации с датчиков и управления исполнительными устройствами. На этом уровне работают интеллектуальные  устройства  сопряжения с обьектом (УСО)  или  сетевые модули ввода вывода. К  оборудованию последних двух уровней предъявляется повышенные требования к надежности и безопасности. Контроллеры находятся  в не посредственной близости от объекта управления, подверженный действию различных помех, агрессивных сред и вейбраций. 

### Устройства ввода-вывода

Обычно в ВВС (встроенной вычислительной системе)  устройства ввтода-вывода  содержат некоторое количество дискретных и аналоговых входов и выходов.

Система ввода-вывода является тем  блоком ради которого  обычно делается информационно-управляющая система. 

###  Устройства сопряжения с  обьектом

**Устройства сопряжения  с объектом** - выполняют функции адаптера датчиков и исполнительных устройств. Они имеют специальные аппаратные каскады сопряжения с конечными устройствами.  И поддерживают алгоритмы управления  ими. УСО могут выполнять  функции первичной обработки данных с датчиков:

- Фильтрацию
- Усреднение
- Накопление

УСО являются подчиненными по отношению к ПЛК и самостоятельно не реализуют каких-либо алгоритмов контроля объекта  управления. 

По способу  взаимодействия с контроллером УСО делиться на: **локальные** - конструктивно совмещены с логическим  контроллером, **удаленные** (сетевые) - взаимодействует по сетевому каналу, конструктивно независим от ПЛК.

В отличие от ввода-вывода УСО работает с реальным   обьектом в условиях помех, высоких напряжений и больших токов. Как правило это устройство гальванически развязанной с обьектом управления.

В качестве УСО могут выступать дискретные и аналоговые входы-выходы. УСО является  водоразделом, отделяющий вычислительные устройства от достаточно агрессивной окружающей среды объекта управления.

### Роль и  функции режима реального времени при управлении объектами

Особенности  работы встроенной системы состоит в наличии необходимости работы в реальном масштабе времени.

ВВС -> Управление исполнительным устройством -> Объект  Управления 
ВВС <- Информация с датчика <- Обьект управления

![](%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D0%BC%D1%8B%D0%B5%20%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5%20%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D1%8B/8B736897-D77E-4592-A866-23B4C88EDD3A.png)

T1 -  время  получения  сигнала с датчика
T2 - время выдачи управляющего воздействия на исполнительное устройство
T3 - крайний  срок выдачи  управляющего воздействия

Если по какой-либо причине выдача управляющего сигнала задержится, сигнал будет выработан после Т3, управляющий сигнал будет бесполезен или даже вреден.

Термин «Режим реального времени» в процессе управления отображает прежде всего факт своевременного получения результата управляющих воздействий  на объект.

Для управления  объектом в режиме реального времени можно выделить три уровня: **функциональный**, **программный** и **аппаратный**.

Задачи реального времени предъявляют требования к вычислительным управляющим системам, в том числе к операционным системам, в которых реализовано программное обеспечение реального времени.

Принципиальное отличие информационных систем  от систем реального времени в трактовке параметра «Реакция вход выход». 

**«Правильный ответ поздно = неправильный»**

К особенностям встроенных систем  относится необходимость обеспечения надежности, безопасности и гарантированного времени реакции.

Время протекающее между получением информации от объекта управления и выдачей сигнала управления от встроенной системы - **время  реакции**.

По степени важности последствий не соблюдения времени реакции обычно выделяют две группы систем реального времени: система мягкого реального времени и система жесткого реального времени.

**Система мягкого реального времени** - задержки задаются средними величинами (имеет место в организации бизнес процессов и торговли).

**Система жесткого реального времени** - система не выполнение временных ограничений в которых приводит к катастрофическим последствиям для целевой функции системы (имеет место в случае военных и космических применений).

::Шемелин В.К. и Хазанова О.В. Управление системами и процессами ( почитать про управление системами в  реальном времени):: 

### ПЛК их роль и особенности для применения в системах управления объектами в режиме реального времени

Первый ПЛК  был разработан в 1968 году группой инженеров компании General Motors. ПЛК были  применены в USA для автоматизации конвейерного сборочного производства в автомобильной промышленности фирмы  Moddicon в 1969. 

Первые ПЛК были разработанны только для простых последовательных операций с  двоичными сигналами. 

**ПЛК** -  специальные микрокомпьютеры, предназначенные для выполнения операций переключения в промышленных условиях. Современные ПЛК помимо простых логических операций способны выполнять цифровую обработку сигналов управления приводами, регулирования, функции операторского управления.

Основное преимущества ПЛК заключается в том, что одиночная компактная схема  может заменить сотни реле т.к. функции ПЛК реализуются программно, а не аппаратно. Поэтому его поведение можно изменить с минимальными усилиями. Сегодня ПЛК  применяются в   энергетике, области связи, химической промышленности, сфере добычи транспортировки нефти и газа, системах  обеспечения  безопасности, автоматизации складов, производстве продуктов питания и напитков,  на транспорте, в системах управления технологическими  процессами и робота-техническими комплексами.

ПЛК заменили реле на производстве т.к. они:  более компактны, надежнее во многих применениях, легче осуществить монтаж и  демонтаж, легче изменить последовательность или логику процесса.

Основные фирмы по производству контроллеров:  Simens, Inter, Mitsubishi, Motorrolla, Amrone.

**ПЛК разрабатывают с помощью КМОП технологий** - набор полупроводниковых технологий построение интегральных микросхем и соответствующая ей схемотехника микросхем.

Интеграция модулей ввода вывода и универсальное ПО и являются ключевыми возможностями ПЛК.

#### Требования к контроллеру

1. ПЛК должен быть предназначен для работы в условиях промышленной среды
2. В режиме реального времени должен быть доступен для программирования не специалистом в области информатики.
3. Физическое исполнение  контроллера определяется требуемой степенью защиты, начиная от контроллеров в легких пластиковых корпусах, предназначенных для монтажа в шкафу (степень защиты IP20), и до герметичных устройств в литых металлических корпусах.

ПЛК имеет ряд особенностей, отличающие их от других электронных приборов применяемых в промышленности:

1. В отличие от микроконтроллера областью применения ПЛК  являются автоматизированные процессы промышленного производства
2. В отличие  от компьютеров ориентированных на принятие решений и управление оператором, ПЛК ориентированы на работу  с машинами через развитый ввод сигналов датчиков и вывод сигналов на исполнительные механизмы.
3. В  отличие от встраиваемых систем ПЛК изготавливаются как  самостоятельные изделия отдельно от управляемого при его помощи оборудования.

#### Плюсы ПЛК

1. Широкие функциональные возможности 
2. Быстрая замена модулей
3. Работа в режиме реального времени
4. Простота эксплуатации
5. Переносимость программ  благодаря стандартизации ЯП
6. Надежность в условиях промышленной среды
7. Возможность системной интеграции

#### Тенденции в развитии ПЛК

1. Уменьшение габаритов 
2. Расширение функциональных возможностей 
3. Увеличение количества поддерживаемых интерфейсов и сетей.
4. Снижение стоимости 
 
####  Классификация ПЛК

1.  По количеству каналов ввода-вывода:
	1. Нано ПЛК (меньше 16 каналов)
	2. Микро ПЛК (от 16 до 100 каналов)
	3. Среднее ПЛК (от 100 до 500 каналов)
	4. Большие ПЛК (более 500 каналов)
2. По расположению модулей ввода-вывода:
	1. Моноблочные  - в которых устройства ввода-вывода  не может быть удалено из контроллера  или заменено на другое. Конструктивно контроллер представляет собой единое целое с  устройствами ввода-вывода.
	2. Модульные - состоящие из общей корзины, в котором располагается модуль центрально процессора и сменные модули ввода-вывода. Типовое количество слотов для смены  модуля от 8 до 32.
	3. Распределенные - в которых модули ввода-вывода выполнены в отдельных корпусах и соединяются центральным модулем по сети и могут быть расположены на расстоянии до 1 км.
3. По конструктивному исполнению и способу крепления:
	1. Панельные (для монтажа на панель или дверцу шкафа) 
	2. Для монтажа на дин-рейку внутри шкафа. 
	3. Для крепления на стене
	4. Для  монтажа в стойке
	5. Безкорпусные 
4. По способу программирования:
	1. Программируемые с лицевой панели контроллера
	2. Программируемые переносным программатором
	3. Программируемые с помощью ПК
5. По области применения:
	1. Универсальные обще-промышленные
	2. Для управления роботами
	3. Для управления позиционированием и перемещением
	4. Коммуникационные
	5. ПИД-контроллеры
	

#### Структурная схема  ПЛК 

Под понятием ПЛК  подразумевается блочно-модульные микропроцессорные системы универсального и общего назначения, предназначены  для автоматизации в различных областях промышленности.

Аппаратный комплекс ПЛК конструктивно выполняется в виде единого модуля, содержащего плату микропроцессорной системы с возможность расширения  через разъемы  локальной шины и/или сетевого интерфейса.

Расширительные модули  (платы) входят в технически регламентированный состав УСО (устройстов сопряжения  с объектами). Осуществляя нормализацию и предобработку аналоговых и дискретных сигналов ввода-вывода для  ПЛК.

ПЛК - программно управляемый дискретный автомат, имеющий некоторое множество входов подключенных посредствам датчиков к объекту управления и множество выходов, подключенных к исполнительным устройствам. ПКЛ контролирует состояние входов и вырабатывает определенные последовательности  программно заданных действий, отражающихся в изменении выходов.

![](%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D0%BC%D1%8B%D0%B5%20%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5%20%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D1%8B/C3E328E1-207C-4292-9429-6574CAF0CDAD.png)

Детальная регламентация  всех составляющих ПЛК содержится в нормативном документе ГОСТ Р 51840 - 2001. ПКЛ имеет собственный блок питания, программатор, центральный процессор, оперативную память, сетевую карту, модули ввода вывода.

**Процессорный модуль** - включает в себя микропроцессор  (ЦПУ), запоминающее устройство, часы реального времени, таймер.

Микропроцессорные системы ПЛК содержат: 

1. ЦП (В основном 32-bit), обеспечивающий выполнение логических и арифметических  операций над информацией, характеризующий текущее состояние технологического оборудования с последующей выработкой управляющих сигналов на базе заранее разработанного алгоритма управления (включает в себя таймеры, счетчики, АЦП, ШИМ, модули обработки сигналов  реального времени).
2. Память программы  на основе flash памяти - служит для хранения исполняемых программ.
3. Блок оперативно запоминающего устройства, обеспечивающий временное хранение промежуточных результатов обработки информации.
4. Сетевой интерфейс
5. Источник питания модуля ПЛК, может быть встроенным или  выполнен в виде отдельно устанавливаемого блока, должен предусматривать преобразование энергии  переменного сигнала в стандартное напряжение 5V (необходимые для работы процессора) и 24V необходимые для  блоков ввода-вывода.
6. Механизмы реального времени - часы реального времени, представляют собой кварцевые часы, которые питаются от батарейки и поэтому продолжают идти и при выключенном ПЛК.
7. Сторожевой таймер  - представляет собой счетчик, который  считает импульсы тактового генератора и в нормальном режиме периодически   сбрасывается  (перезапускается) работающим процессором. Если процессор «зависает» , то сигналы сброса  не поступают в счетчик. Он продолжает считать и при  достижении некоторого порога вырабатывает сигнал «сброс» для перезапуска зависшего процессора. 

![](%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D0%BC%D1%8B%D0%B5%20%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5%20%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D1%8B/E7439CDF-484E-46F7-BCF0-549FCFCA48F9.png)

Основное общепромышленное питание системы ПЛК КИП и А ( Контрольные измерительные  приборы и автоматика) составляет 24V постоянного тока.

## Типовая архитектура серийных ПЛК на примере контроллера  SIMATIC S7-300.

Рисунок 9 из распечатки.

На прицельной рейке (ПР) размещаются: центральный модуль (ЦМ), который всегда присутствует в ПЛК, с помощью шинных соединителей (ШС) до 8-ми периферийных модулей, внешний источник питания (Внеш. ИП). Модуль подключения (МП) обеспечивает при необходимости возможность подсоединения к центральному модулю  специальными кабелями до трех ПР расширения. Таким образом максимальное количество ПМ может достигать 32-ух.

Все  модули легко устанавливаются на ПР и  фиксируются винтами. Формирование внутренний шины ПЛК производится с помощью ШС (шино-соединителей). Наличие фронтальных клемнных блоков (КБ) позволяет легко подключать периферийные устройства объекта управления  и производить при необходимости замену самих ПМ.

В качестве основных ПМ в ПЛК всегда присутствует сигнальные модули  ввода-вывода дискретных и аналоговых сигналов. В качестве вспомогательных периферийных модулей в различных моделях ПЛС могут применяться различные функциональные и коммуникационные модули.

### Архитектура и общая организация модульного ПЛК

Рисунок 10 из распечатки.

Модули ПЛК объединены внутренней шиной по которой передается вся информация. 

 Для ввода и редактирования программ, параметрирования и тестирования системы используют программатор. Может быть временно подключен к центральному модулю.

Система ввода-вывода ПЛК может включать в свой состав две части: система локального ввода-вывода (образует ОПМ), установленными  непосредственно в монтажные стойки контроллера и предназначены для получения входных сигналов с дискретных (ДД) и аналоговых датчиков (АД) и выдачи управляющих воздействий на дискретные (ДИМ) и аналоговые исполнительные механизмы (АИМ).

Система  распределенного ввода-вывода включает в свой  состав модули децентрализованной периферии (МДП) и приборы полевого уровня (ДиИМ),  подключаемый к контроллеру через промышленную сеть (МП).

Вспомогательные периферийные модули (ВПМ) предназначены для аппаратной реализации стандартных, часто используемых алгоритмов задержек времени (таймеров), счета, регулирования, управления и  призваны разгрузить вычислительные мощности центрального модуля (ЦМ).

Коммуникационные модули (КМ)  используются для связи ПЛК с другими интеллектуальными  устройствами. 

##  Центральный модуль и его архитектура

Рисунок 11.

В состав центрального модуля  как правило входят следующие элементы  и устройства:

1. ЦП
2. ОЗУ и ПЗУ
3. АИП - автономный  источник питания
4. ВИП - Внутренний источник питания
5. РПЗУ - репрограммируемая переносимая память
6. X1 - разъем для подключения внешнего источника питания
7. Х2 - для подключения периферийных модулей
8. Х3, Х4 - разъемы встроенных модулей ввода-вывода
9. Х5  - разъем для подачи питания  на внутренний источник питания (ИП)
10. Х6 - разъем связи с программатором, П - переключатель режима работы, И - индикация


ЦП представляет собой набор специально связанных между собой регистров среди которых обязательно имеются следующие:

Рисунок 12.

1. СК - щеточки команд - содержит номер текущей команды
2.  РК - регист команд  хранит код выполняемой операции
3. АР - адресный регистр - содержит адрес операнда
4. ИР - индексный регистр - служит  для организации косвенной адресации, А - аккумулятор, относится к регистрам общего назначения (РОН)

Центральный процессор содержит АЛУ  для реализации логических и арифметических операций.

**Регистр** - электронное устройство для временного хранения операндов (команд чисел) разрядностью 8 или 16  бит. Отличия регистра от ячейки памяти состоит в том, что регистры имеют специализацию хранения  определенного вида информации, в регистрах имеется возможность изменять информацию в пределах одного бита и некоторые разряды регистра. Могут быть электрически соединены с другими схемами ЦП для  постоянной пересылки информации.
- - - -

##  Центральная память ПЛК 

###  Классификация  запоминающих устройств

1. По способу хранения информации при отключении питания
	1. Энергозависимые
	2. Энергонезависимые
2. По способу организации доступа к памяти
	1. С произвольным доступом
	2. С  последовательным доступом
3. По способу хранения информации в элементах памяти
	1. Статические ЗП
	2. Динамические  ЗП
4. С точки зрения физической реализации можно выделить
	1. Встроенные в кристалл микропроцессора
	2. Реализованные в виде отдельной большой интегральной  схемы (БИС)
5. По функциональному назначению большенство типов ЗУ можно разделить на группы
	1. Сверх оперативные
	2. ОЗУ & ПЗУ
	3. Пере программируемые запоминающие устройства (ППЗУ)
	4. Программируемые логические матрицы (ПЛМ)
	5. Буферные ЗП
	6. Стековые ЗП 
	7. Внешние ЗП

По тому как перемещаются слова ЗП с последовательным доступом делятся  на два типа.

**Буферные ЗП (очередь)** - запоминающее устройство в котором слова перемещаются всегда в одном направлении в долг цепочки из групп элементов. Информация записывается на группы элементов в начале цепочки и считывается в ее конце.

**Стековые ЗП**  - запоминающее устройство в котором слова могут перемещаться в любом направлении,  а информация записывается и считывается на одной и  той же группе элементов, таким образом слова считываются в порядке противоположном порядку записи.

Особенности ЦП всех ПЛК является то, что она специализированна, т.е. разделена на особые зоны (рисунок 12), используемые для хранения конкретных типов информации, например данных (с входов/выходов, внутренней текущей информации) и программ (системных и прикладных).

В Контроллерах (типа SEMATIC S7-200) центральная память организованна в виде стековой памяти.

**Стек** - организованный массив информации с сочетанием определенным порядком его загрузки и выгрузки.

Стеки бывают двух видов: двусторонние (по типу транспортной ленты) и односторонние (по типу магазина), в которых чтение/запись информации производиться через вершину стека (рисунок 13).

 На рисунке 14 показан последовательный механизм программной реализации логической функции управления Y = неХ1 * (Х2 + Х3)

Особенностью работы стековой памяти является то, что вся информация (значения загружаемых прямых и инверсных входов Х, логические команды сложения/умножения, включения/отключения входа Y) осуществляется только через вершину стека.

### Модули ввода/вывода ПЛК

Вход - клемма для подключения какого-либо устройства, к передает информацию в контроллер. 

Выходы - клеммы на которые сам  контроллер может подать сигнал.

Модули ввода/вывода - специальные  электронные блоки, предназначенные для связи центрального модуля с элементами объекта управления (датчиками и исполнительными механизмами). Их подключение к ЦМ  может быть организованно тремя способами:

1. Непосредственно на внутреннюю шину контроллера с использованием шинных соединителей
2. Параллельно на внутреннюю шину с помощью модулей подключения (ПМ) и дополнительных профильных реек
3. Последовательно с использованием промышленных сетей и устройств связи с удаленными объектами

При подборе модулей ввода/вывода следует учитывать следующие особенности:

1. Адресация конкретных клемм модулей может быть привязана либо к самим модулям либо к их посадочным местам конструктива ПЛК (Гнездам или разъемом)
2. Соотношение количества входов  и выходов может быть либо свободно распределяемое пользователем, либо принудительное (как правило 50 на 50).
3. Коммутация сигнальных проводов может быть выполнена либо на самом модуле, либо с использованием специальных клеенных блоков.
4. Модули выпускаются в различном исполнении:
	1. Входные
	2. Выходные
	3. Комбинированные
	4. Дискретные
	5. Аналоговые

### Дискретные входы

Один дискретный вход ПЛК способен принимать один бинарный электрический сигнал, описываемый двумя состояниями: включен или выключен. На уровне программы  - это один бит информации.

Нагрузкой дискретных входов могут быть: лампы, реле, силовые пускатели, соленоиды, пневматические клапаны, кнопки, концевые выключатели, термостаты.

Напряжение  сигнала унифицирована для всех ПЛК и составляет 24V.
 
Типовое значение тока одного дискретного входа составляет около 10 mA.

Все современные датчики, базирующиеся на разнообразных физических явлениях (ёмкостные, индуктивные, оптические), как правило имеют встроенные первичные преобразователи и не требуют дополнительного согласования при подключении к дискретным входам ПЛК.

![](%D0%9F%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D0%BC%D1%8B%D0%B5%20%D0%9B%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5%20%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D1%8B/8F48E3FC-2F14-48F4-B5B1-AB30EC1EFED3.png)

Рисунок - модуль ввода/вывода дискретных сигналов

Ввод/вывод осуществляется через порт, представляющий собой 8-ми разрядный регистр, который адресуется по шине адреса. При совпадении выставленного на шине адреса с адресом присвоенным конкретному порту, дешифратор адреса (ДША) выдает сигнал (ЦС) разрешения работы порта. По этому сигналу регистр подключается  к шинам микропроцессора и через него можно передавать параллельные 8-ми разрядные двоичные коды. Обмен данными  происходит через шину данных. Направление  передачи определяется сигналами чтения (ЧТ)  и записи (ЗП) . Готовность порта к приему/выдачи информации определяется сигналом ГОТ.

Каждый бит порта позволяет передавать один логический сигнал























#Кригер




